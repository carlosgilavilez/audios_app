const E=(function(){const o=function(e){return document.getElementById(e)},n=o("pl-audio");if(!n)return{bind:function(){},restore:function(){}};const v=o("sticky-player"),w=o("pl-play"),J=o("pl-play-icon"),_=o("pl-pause-icon"),oe=o("pl-prev"),re=o("pl-next"),se=o("pl-back-10"),ce=o("pl-forward-10"),x=o("pl-title"),y=o("pl-author"),c=o("pl-seek"),h=o("pl-current"),K=o("pl-duration"),d=o("pl-volume"),k=o("pl-volume-toggle"),g=o("pl-rate"),m=o("pl-download"),A=o("pl-play-minimized"),U=o("pl-play-icon-minimized"),j=o("pl-pause-icon-minimized"),C=o("pl-title-minimized"),q=o("pl-author-minimized"),l=o("pl-seek-minimized"),P=o("pl-play-expanded"),G=o("pl-play-icon-expanded"),H=o("pl-pause-icon-expanded"),de=o("pl-prev-expanded"),le=o("pl-next-expanded"),ue=o("pl-back-10-expanded"),fe=o("pl-forward-10-expanded"),M=o("pl-title-expanded"),N=o("pl-author-expanded"),u=o("pl-seek-expanded"),b=o("pl-current-expanded"),Q=o("pl-duration-expanded"),F=o("pl-download-expanded"),W=o("pl-expand"),X=o("pl-collapse"),Y=e=>{if(!v)return;const t=!!e;v.setAttribute("data-player-expanded",t?"true":"false"),document.body.classList.toggle("player-expanded",t)};W&&W.addEventListener("click",function(e){e.preventDefault(),Y(!0)}),X&&X.addEventListener("click",function(e){e.preventDefault(),Y(!1)});function f(e){if(!isFinite(e)||e<0)return"0:00";const t=Math.floor(e/60),i=Math.floor(e%60);return t+":"+(i<10?"0"+i:String(i))}function Z(e){return((e||"").toString().trim()||"audio").replace(/[\\/:*?"<>|]+/g,"").slice(0,60)||"audio"}function $(e,t){if(m){const i=t||"";i&&m.setAttribute("href",i);const a=i.split("?")[0].split(".").pop()||"mp3",r=a.length<=4?a:"mp3";m.setAttribute("download",Z(e)+"."+r)}if(F){const i=t||"";i&&F.setAttribute("href",i);const a=i.split("?")[0].split(".").pop()||"mp3",r=a.length<=4?a:"mp3";F.setAttribute("download",Z(e)+"."+r)}}function z(){v&&(v.classList.remove("hidden"),requestAnimationFrame(function(){v.classList.remove("opacity-0"),v.classList.remove("translate-y-2")}))}function s(e){J&&J.classList.toggle("hidden",e),_&&_.classList.toggle("hidden",!e),w&&(w.setAttribute("aria-label",e?"Pausar":"Reproducir"),w.setAttribute("aria-pressed",e?"true":"false")),U&&U.classList.toggle("hidden",e),j&&j.classList.toggle("hidden",!e),A&&(A.setAttribute("aria-label",e?"Pausar":"Reproducir"),A.setAttribute("aria-pressed",e?"true":"false")),G&&G.classList.toggle("hidden",e),H&&H.classList.toggle("hidden",!e),P&&(P.setAttribute("aria-label",e?"Pausar":"Reproducir"),P.setAttribute("aria-pressed",e?"true":"false"))}function T(){const e=document.querySelector('[data-wp-section]:not([hidden]) [data-view-active="true"]')||document.querySelector('[data-view-active="true"]');if(!e)return;e.querySelectorAll(".btn-play").forEach(function(i){i.classList.remove("bg-success","text-success-foreground"),i.classList.add("bg-card","text-success");const a=i.querySelector(".icon-play");a&&a.classList.remove("hidden");const r=i.querySelector(".icon-eq");r&&r.classList.add("hidden")})}function I(e){if(!e)return;e.classList.remove("bg-card","text-success"),e.classList.add("bg-success","text-success-foreground");const t=e.querySelector(".icon-play");t&&t.classList.add("hidden");const i=e.querySelector(".icon-eq");i&&i.classList.remove("hidden"),typeof e.focus=="function"&&e.focus({preventScroll:!0})}async function R(e){if(e<0||e>=items.length)return;index=e;const t=items[index];let i="",a="",r="",S="";if(window.audioPlaylist&&window.audioPlaylist[index]){const p=window.audioPlaylist[index];i=p.play_url||"",a=p.title||"",r=p.artist||"",S=p.download_url||""}else t&&(i=t.dataset.audioSrc||"",a=t.dataset.title||"",r=t.dataset.author||"",S=t.dataset.download||"");x&&(x.textContent=a||"-"),y&&(y.textContent=r||"-"),C&&(C.textContent=a||"-"),q&&(q.textContent=r||"-"),M&&(M.textContent=a||"-"),N&&(N.textContent=r||"-"),$(a,S||i),n.pause(),i&&(n.src=i,n.load()),T(),I(t),z();try{await n.play(),s(!0)}catch(p){console.error("play()",p),s(!1)}}function D(){const e=document.querySelector('[data-wp-section]:not([hidden]) [data-view-active="true"]')||document.querySelector('[data-view-active="true"]')||document;items=Array.from(e.querySelectorAll(".btn-play[data-audio-src]")),items.forEach(function(t,i){t.dataset.index=i,t.dataset.playerBound!=="1"&&(t.dataset.playerBound="1",t.addEventListener("click",function(a){a.preventDefault();const r=t.dataset.audioSrc;if(r){if(n.src===r){n.paused?(index=i,T(),I(t),z(),n.play().then(function(){s(!0)}).catch(function(){})):n.pause();return}R(i)}}))})}function pe(e){if(!isFinite(e))return;const t=isFinite(n.duration)?n.duration:0,i=isFinite(n.currentTime)?n.currentTime:0,a=Math.max(0,Math.min(t,i+e));n.currentTime=a,!dragging&&c&&(c.value=String(Math.floor(a))),!dragging&&l&&(l.value=String(Math.floor(a))),!dragging&&u&&(u.value=String(Math.floor(a))),h&&(h.textContent=f(a)),b&&(b.textContent=f(a))}function me(e,t,i){const a=function(){n.paused?n.play().then(function(){s(!0)}).catch(function(){}):(n.pause(),s(!1))};e&&e.addEventListener("click",a),t&&t.addEventListener("click",a),i&&i.addEventListener("click",a)}me(w,A,P);function ee(e,t,i){const a=function(){pe(i)};e&&e.addEventListener("click",a),t&&t.addEventListener("click",a)}ee(se,ue,-10),ee(ce,fe,10);function te(e,t,i){const a=function(){i==="prev"&&index>0?(D(),R(index-1)):i==="next"&&index<items.length-1&&(D(),R(index+1))};e&&e.addEventListener("click",a),t&&t.addEventListener("click",a)}te(oe,de,"prev"),te(re,le,"next"),n.addEventListener("loadedmetadata",function(){const e=Math.floor(n.duration||0);c&&(c.max=String(e)),l&&(l.max=String(e)),u&&(u.max=String(e)),K&&(K.textContent=f(e)),Q&&(Q.textContent=f(e))}),n.addEventListener("timeupdate",function(){const e=Math.floor(n.currentTime||0);!dragging&&c&&(c.value=String(e)),!dragging&&l&&(l.value=String(e)),!dragging&&u&&(u.value=String(e)),h&&(h.textContent=f(e)),b&&(b.textContent=f(e))});function B(){if(!c&&!l&&!u)return;const e=Number(c.value||l.value||u.value||0);isFinite(e)&&(n.currentTime=e),dragging=!1}function V(e){e&&(e.addEventListener("input",function(){dragging=!0;const t=Number(e.value);h&&(h.textContent=f(t)),b&&(b.textContent=f(t))}),e.addEventListener("change",B),e.addEventListener("mouseup",B),e.addEventListener("touchend",B,{passive:!0}))}V(c),V(l),V(u);function O(){if(!k)return;const e=k.querySelector("i");e&&(n.muted||n.volume===0?e.setAttribute("data-lucide","volume-x"):n.volume<.5?e.setAttribute("data-lucide","volume-1"):e.setAttribute("data-lucide","volume-2"),window.lucide&&window.lucide.createIcons())}k&&k.addEventListener("click",function(){n.muted?(n.muted=!1,n.volume=lastVolume,d&&(d.value=String(lastVolume))):(lastVolume=n.volume,n.muted=!0,d&&(d.value="0")),O()}),d&&d.addEventListener("input",function(){const e=Number(d.value);isFinite(e)&&(n.volume=Math.max(0,Math.min(1,e)),n.muted=e===0),O()}),n.addEventListener("volumechange",O),g&&g.addEventListener("change",function(){const e=Number((g.value||"").replace("x",""));isFinite(e)&&e>0&&(n.playbackRate=e)}),n.addEventListener("ended",function(){s(!1),T()});function ne(e){if(index<0||index>=items.length)return;const t=items[index],i=t.querySelector(".icon-eq");i&&i.classList.toggle("hidden",!e);const a=t.querySelector(".icon-play");a&&a.classList.toggle("hidden",e)}n.addEventListener("play",function(){s(!0),ne(!0)}),n.addEventListener("pause",function(){s(!1),ne(!1)});const ie="pl-state";let ae=0;function L(){try{const e={src:n.currentSrc||n.src||"",title:x&&x.textContent||"",author:y&&y.textContent||"",download:m&&m.getAttribute("href")||"",index,currentTime:Number(n.currentTime||0),paused:n.paused,volume:Number(n.volume||1),rate:Number(n.playbackRate||1)};localStorage.setItem(ie,JSON.stringify(e))}catch{}}n.addEventListener("timeupdate",function(){const e=Date.now();e-ae>1e3&&(ae=e,L())}),n.addEventListener("play",L),n.addEventListener("pause",L),window.addEventListener("beforeunload",L),document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&L()});async function ve(){try{const e=localStorage.getItem(ie);if(!e)return;const t=JSON.parse(e);if(!t||!t.src)return;const i=Array.from(document.querySelectorAll(".btn-play[data-audio-src]")).find(function(r){return r.dataset.audioSrc===t.src});if(i?(items=Array.from(document.querySelectorAll(".btn-play[data-audio-src]")),index=Number(i.dataset.index||items.indexOf(i)),T(),I(i)):index=-1,x&&(x.textContent=t.title||"-"),y&&(y.textContent=t.author||"-"),C&&(C.textContent=t.title||"-"),q&&(q.textContent=t.author||"-"),M&&(M.textContent=t.title||"-"),N&&(N.textContent=t.author||"-"),m&&(m.href=t.download||t.src,$(t.title,t.download||t.src)),n.pause(),n.src=t.src,n.load(),z(),isFinite(t.volume)){try{n.volume=Math.max(0,Math.min(1,Number(t.volume)))}catch{}d&&(d.value=String(n.volume))}if(isFinite(t.rate)&&t.rate>0){try{n.playbackRate=Number(t.rate)}catch{}if(g){const r=n.playbackRate+"x";Array.from(g.options||[]).some(function(p){return p.value===r})&&(g.value=r)}}const a=Number(t.currentTime||0);if(isFinite(a)&&a>0&&n.addEventListener("loadedmetadata",function r(){n.removeEventListener("loadedmetadata",r);try{n.currentTime=a}catch{}}),t.paused===!1)try{await n.play(),s(!0)}catch{}else s(!1)}catch{}}return{bind:D,restore:ve}})();document.addEventListener("DOMContentLoaded",function(){if(!E||typeof E.bind!="function")return;E.bind(),!/^(?:\/admin|\/editor)\b/.test(location.pathname)&&typeof E.restore=="function"&&E.restore()});
