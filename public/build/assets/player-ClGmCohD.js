const q=(function(){const o=function(e){return document.getElementById(e)},n=o("pl-audio");if(!n)return{bind:function(){},restore:function(){}};const m=o("sticky-player"),x=o("pl-play"),D=o("pl-play-icon"),B=o("pl-pause-icon"),O=o("pl-prev"),J=o("pl-next"),_=o("pl-back-10"),z=o("pl-forward-10"),y=o("pl-title"),v=o("pl-author"),s=o("pl-seek"),h=o("pl-current"),K=o("pl-duration"),w=o("pl-volume"),L=o("pl-rate"),u=o("pl-download"),g=document.getElementById("pl-expand"),Q=g?g.querySelector("[data-player-toggle-label]"):null,p=window.matchMedia?window.matchMedia("(max-width: 767px)"):null;let C=!0,l=[],c=-1,k=!1;const U=()=>p?p.matches:(window.innerWidth||0)<=767,b=e=>{if(!m)return;const t=!!e;C=t,m.setAttribute("data-player-expanded",t?"true":"false"),g&&(g.setAttribute("aria-expanded",t?"true":"false"),Q&&(Q.textContent=t?"Ocultar controles":"Mostrar controles"))},A=()=>{U()&&!C&&b(!0)},X=()=>{U()?b(!1):b(!0)};if(p){const e=t=>{t.matches?b(!1):b(!0)};typeof p.addEventListener=="function"?p.addEventListener("change",e):typeof p.addListener=="function"&&p.addListener(e)}X();function M(e){if(!isFinite(e)||e<0)return"0:00";const t=Math.floor(e/60),i=Math.floor(e%60);return t+":"+(i<10?"0"+i:String(i))}function Y(e){return((e||"").toString().trim()||"audio").replace(/[\\/:*?"<>|]+/g,"").slice(0,60)||"audio"}function W(e,t){if(!u)return;const i=u.getAttribute("href")||t||"";i&&u.setAttribute("href",i);const a=i.split("?")[0].split(".").pop()||"mp3",r=a.length<=4?a:"mp3";u.setAttribute("download",Y(e)+"."+r)}function F(){m&&(m.classList.remove("hidden"),requestAnimationFrame(function(){m.classList.remove("opacity-0"),m.classList.remove("translate-y-2")}))}function d(e){D&&D.classList.toggle("hidden",e),B&&B.classList.toggle("hidden",!e),x&&(x.setAttribute("aria-label",e?"Pausar":"Reproducir"),x.setAttribute("aria-pressed",e?"true":"false"))}function N(){const e=document.querySelector('[data-wp-section]:not([hidden]) [data-view-active="true"]')||document.querySelector('[data-view-active="true"]');if(!e)return;e.querySelectorAll(".btn-play").forEach(function(i){i.classList.remove("bg-success","text-success-foreground"),i.classList.add("bg-card","text-success");const a=i.querySelector(".icon-play");a&&a.classList.remove("hidden");const r=i.querySelector(".icon-eq");r&&r.classList.add("hidden")})}function I(e){if(!e)return;e.classList.remove("bg-card","text-success"),e.classList.add("bg-success","text-success-foreground");const t=e.querySelector(".icon-play");t&&t.classList.add("hidden");const i=e.querySelector(".icon-eq");i&&i.classList.remove("hidden"),typeof e.focus=="function"&&e.focus({preventScroll:!0})}async function T(e){if(e<0||e>=l.length)return;c=e;const t=l[c];let i="",a="",r="",E="";if(window.audioPlaylist&&window.audioPlaylist[c]){const f=window.audioPlaylist[c];i=f.play_url||"",a=f.title||"",r=f.artist||"",E=f.download_url||""}else t&&(i=t.dataset.audioSrc||"",a=t.dataset.title||"",r=t.dataset.author||"",E=t.dataset.download||"");y&&(y.textContent=a||"-"),v&&(v.textContent=r||"-"),W(a,E||i),n.pause(),i&&(n.src=i,n.load()),N(),I(t),F(),A();try{await n.play(),d(!0)}catch(f){console.error("play()",f),d(!1)}}function P(){const e=document.querySelector('[data-wp-section]:not([hidden]) [data-view-active="true"]')||document.querySelector('[data-view-active="true"]')||document;l=Array.from(e.querySelectorAll(".btn-play[data-audio-src]")),l.forEach(function(t,i){t.dataset.index=i,t.dataset.playerBound!=="1"&&(t.dataset.playerBound="1",t.addEventListener("click",function(a){a.preventDefault();const r=t.dataset.audioSrc;if(r){if(n.src===r){n.paused?(c=i,N(),I(t),F(),A(),A(),n.play().then(function(){d(!0)}).catch(function(){})):n.pause();return}T(i)}}))})}function j(e){if(!isFinite(e))return;const t=isFinite(n.duration)?n.duration:0,i=isFinite(n.currentTime)?n.currentTime:0,a=Math.max(0,Math.min(t,i+e));n.currentTime=a,!k&&s&&(s.value=String(Math.floor(a))),h&&(h.textContent=M(a))}x&&x.addEventListener("click",function(){n.paused?n.play().then(function(){d(!0)}).catch(function(){}):(n.pause(),d(!1))}),O&&O.addEventListener("click",function(){c>0&&(P(),T(c-1))}),J&&J.addEventListener("click",function(){c<l.length-1&&(P(),T(c+1))}),g&&g.addEventListener("click",function(e){e.preventDefault(),b(!C)}),_&&_.addEventListener("click",function(){j(-10)}),z&&z.addEventListener("click",function(){j(10)}),n.addEventListener("loadedmetadata",function(){const e=Math.floor(n.duration||0);s&&(s.max=String(e)),K&&(K.textContent=M(e))}),n.addEventListener("timeupdate",function(){const e=Math.floor(n.currentTime||0);!k&&s&&(s.value=String(e)),h&&(h.textContent=M(e))});function R(){if(!s)return;const e=Number(s.value||0);isFinite(e)&&(n.currentTime=e),k=!1}s&&(s.addEventListener("input",function(){k=!0,h&&(h.textContent=M(Number(s.value)))}),s.addEventListener("change",R),s.addEventListener("mouseup",R),s.addEventListener("touchend",R,{passive:!0})),w&&w.addEventListener("input",function(){const e=Number(w.value);isFinite(e)&&(n.volume=Math.max(0,Math.min(1,e)))}),L&&L.addEventListener("change",function(){const e=Number((L.value||"").replace("x",""));isFinite(e)&&e>0&&(n.playbackRate=e)}),n.addEventListener("ended",function(){d(!1),N()});function G(e){if(c<0||c>=l.length)return;const t=l[c],i=t.querySelector(".icon-eq");i&&i.classList.toggle("hidden",!e);const a=t.querySelector(".icon-play");a&&a.classList.toggle("hidden",e)}n.addEventListener("play",function(){d(!0),G(!0)}),n.addEventListener("pause",function(){d(!1),G(!1)});const H="pl-state";let V=0;function S(){try{const e={src:n.currentSrc||n.src||"",title:y&&y.textContent||"",author:v&&v.textContent||"",download:u&&u.getAttribute("href")||"",index:c,currentTime:Number(n.currentTime||0),paused:n.paused,volume:Number(n.volume||1),rate:Number(n.playbackRate||1)};localStorage.setItem(H,JSON.stringify(e))}catch{}}n.addEventListener("timeupdate",function(){const e=Date.now();e-V>1e3&&(V=e,S())}),n.addEventListener("play",S),n.addEventListener("pause",S),window.addEventListener("beforeunload",S),document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&S()});async function Z(){try{const e=localStorage.getItem(H);if(!e)return;const t=JSON.parse(e);if(!t||!t.src)return;const i=Array.from(document.querySelectorAll(".btn-play[data-audio-src]")).find(function(r){return r.dataset.audioSrc===t.src});if(i?(l=Array.from(document.querySelectorAll(".btn-play[data-audio-src]")),c=Number(i.dataset.index||l.indexOf(i)),N(),I(i)):c=-1,y&&(y.textContent=t.title||"-"),v&&(v.textContent=t.author||"-"),u&&(u.href=t.download||t.src,W(t.title,t.download||t.src)),n.pause(),n.src=t.src,n.load(),F(),A(),isFinite(t.volume)){try{n.volume=Math.max(0,Math.min(1,Number(t.volume)))}catch{}w&&(w.value=String(n.volume))}if(isFinite(t.rate)&&t.rate>0){try{n.playbackRate=Number(t.rate)}catch{}if(L){const r=n.playbackRate+"x";Array.from(L.options||[]).some(function(f){return f.value===r})&&(L.value=r)}}const a=Number(t.currentTime||0);if(isFinite(a)&&a>0&&n.addEventListener("loadedmetadata",function r(){n.removeEventListener("loadedmetadata",r);try{n.currentTime=a}catch{}}),t.paused===!1)try{await n.play(),d(!0)}catch{}else d(!1)}catch{}}return{bind:P,restore:Z}})();document.addEventListener("DOMContentLoaded",function(){if(!q||typeof q.bind!="function")return;q.bind(),!/^(?:\/admin|\/editor)\b/.test(location.pathname)&&typeof q.restore=="function"&&q.restore()});
