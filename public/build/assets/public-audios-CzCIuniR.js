document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelector("[data-public-audios]");if(!n)return;const m=document.body,a=new URLSearchParams(window.location.search),d=n.querySelector("[data-layout-shell]"),h={get(e){try{return localStorage.getItem(e)}catch{return null}},set(e,t){try{localStorage.setItem(e,t)}catch{}}},b={width:"public-audios-preview-width"};let s=n.querySelector("[data-preview-bar]");(n.dataset.embed==="1"||window.self!==window.top)&&(m.setAttribute("data-embed-detected","1"),s&&(s.remove(),s=null,a.delete("wp_width")));const L=s?Array.from(s.querySelectorAll("[data-preview-size-option]")):[],g=s?s.querySelector("[data-preview-size]"):null,f=[414,820,1280];let r=parseInt(n.dataset.previewWidth||"1280",10);if(f.includes(r)||(r=1280),s)if(a.has("wp_width")){const e=parseInt(a.get("wp_width")||"0",10);f.includes(e)&&(r=e)}else{const e=h.get(b.width);if(e){const t=parseInt(e,10);f.includes(t)&&(r=t)}}const v=()=>{a.delete("view"),s?a.set("wp_width",String(r)):a.delete("wp_width"),window.ThemeManager&&typeof window.ThemeManager.isDark=="function"&&a.set("dark",window.ThemeManager.isDark()?"1":"0");const e=a.toString(),t=e?`${window.location.pathname}?${e}`:window.location.pathname;window.history.replaceState({},"",t)},S=e=>{!d||!Number.isFinite(e)||(d.classList.remove("is-desktop","is-tablet","is-mobile"),e>=1024?d.classList.add("is-desktop"):e>=768?d.classList.add("is-tablet"):d.classList.add("is-mobile"))},E=(e,{persist:t=!0,skipHistory:o=!1}={})=>{s&&(f.includes(e)||(e=1280),r=e,L.forEach(l=>{const y=parseInt(l.getAttribute("data-preview-size-option")||"0",10)===e;if(l.setAttribute("aria-pressed",y?"true":"false"),l.classList.toggle("is-active",y),y&&g){const P=l.getAttribute("data-preview-size-label");P&&(g.textContent=P)}}),document.body.style.setProperty("--wp-preview-width",`${e}px`),document.body.setAttribute("data-wp-width",String(e)),t&&h.set(b.width,String(e)),o||v(),S(e))},i=n.querySelector("[data-filters-dialog]"),c=i?i.querySelector("[data-filters-panel]"):null,k=i?i.querySelector("[data-filters-scrim]"):null,u=n.querySelector("[data-filters-toggle]"),q=n.querySelector("[data-filters-close]"),A='a[href], button:not([disabled]), select:not([disabled]), textarea:not([disabled]), input:not([disabled]):not([type="hidden"]), [tabindex]:not([tabindex="-1"])';let p=null;const x=e=>{if(!c||e.key!=="Tab")return;const t=Array.from(c.querySelectorAll(A)).filter(D=>D.offsetParent!==null);if(!t.length)return;const o=t[0],l=t[t.length-1];e.shiftKey&&document.activeElement===o?(e.preventDefault(),l.focus()):!e.shiftKey&&document.activeElement===l&&(e.preventDefault(),o.focus())},w=e=>{!i||!c||(e?(p=document.activeElement&&typeof document.activeElement.focus=="function"?document.activeElement:null,i.classList.remove("hidden"),i.classList.remove("pointer-events-none"),m.classList.add("filters-open"),requestAnimationFrame(()=>{c.classList.remove("translate-x-full");const t=c.querySelector(A);t&&t.focus({preventScroll:!0})}),i.addEventListener("keydown",x),u&&u.setAttribute("aria-expanded","true")):(c.classList.add("translate-x-full"),i.classList.add("pointer-events-none"),m.classList.remove("filters-open"),i.removeEventListener("keydown",x),setTimeout(()=>{i.classList.add("hidden")},200),u&&u.setAttribute("aria-expanded","false"),p&&typeof p.focus=="function"&&p.focus({preventScroll:!0})))};if(u&&u.addEventListener("click",e=>{e.preventDefault(),w(!0)}),q&&q.addEventListener("click",e=>{e.preventDefault(),w(!1)}),k&&k.addEventListener("click",e=>{e.preventDefault(),w(!1)}),document.addEventListener("keydown",e=>{e.key==="Escape"&&i&&!i.classList.contains("hidden")&&w(!1)}),L.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const o=parseInt(e.getAttribute("data-preview-size-option")||"0",10);E(o)})}),s)E(r,{persist:!1,skipHistory:!0});else if(d){const e=()=>{const t=Math.max(window.innerWidth||0,document.documentElement.clientWidth||0);S(t)};e(),window.addEventListener("resize",e)}v(),window.Player&&typeof window.Player.bind=="function"&&window.Player.bind(),window.addEventListener("theme:change",()=>{v()})});
