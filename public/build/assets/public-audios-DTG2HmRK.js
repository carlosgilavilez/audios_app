document.addEventListener("DOMContentLoaded",()=>{const a=document.querySelector("[data-public-audios]");if(!a)return;const L=document.body,o=new URLSearchParams(window.location.search),d=a.querySelector("[data-layout-shell]"),w={get(e){try{return localStorage.getItem(e)}catch{return null}},set(e,t){try{localStorage.setItem(e,t)}catch{}}},v={view:"public-audios-view",width:"public-audios-preview-width"};let r=a.querySelector("[data-preview-bar]");(a.dataset.embed==="1"||window.self!==window.top)&&(L.setAttribute("data-embed-detected","1"),r&&(r.remove(),r=null,o.delete("wp_width")));const S=r?Array.from(r.querySelectorAll("[data-preview-size-option]")):[],E=r?r.querySelector("[data-preview-size]"):null,m=[414,820,1280];let c=parseInt(a.dataset.previewWidth||"1280",10);if(m.includes(c)||(c=1280),r)if(o.has("wp_width")){const e=parseInt(o.get("wp_width")||"0",10);m.includes(e)&&(c=e)}else{const e=w.get(v.width);if(e){const t=parseInt(e,10);m.includes(t)&&(c=t)}}const A=Array.from(a.querySelectorAll("[data-view-option]")),B=Array.from(a.querySelectorAll("[data-view-panel]"));let p=o.get("view")||a.dataset.initialView||w.get(v.view)||"table";["table","cards"].includes(p)||(p="table");const y=()=>{o.set("view",p),r?o.set("wp_width",String(c)):o.delete("wp_width"),window.ThemeManager&&typeof window.ThemeManager.isDark=="function"&&o.set("dark",window.ThemeManager.isDark()?"1":"0");const e=o.toString(),t=e?`${window.location.pathname}?${e}`:window.location.pathname;window.history.replaceState({},"",t)},k=e=>{!d||!Number.isFinite(e)||(d.classList.remove("is-desktop","is-tablet","is-mobile"),e>=1024?d.classList.add("is-desktop"):e>=768?d.classList.add("is-tablet"):d.classList.add("is-mobile"))},q=(e,{persist:t=!0,skipHistory:l=!1}={})=>{r&&(m.includes(e)||(e=1280),c=e,S.forEach(i=>{const n=parseInt(i.getAttribute("data-preview-size-option")||"0",10)===e;if(i.setAttribute("aria-pressed",n?"true":"false"),i.classList.toggle("is-active",n),n&&E){const z=i.getAttribute("data-preview-size-label");z&&(E.textContent=z)}}),document.body.style.setProperty("--wp-preview-width",`${e}px`),document.body.setAttribute("data-wp-width",String(e)),t&&w.set(v.width,String(e)),l||y(),k(e))},D=(e,{persist:t=!0,skipHistory:l=!1}={})=>{["table","cards"].includes(e)||(e="table"),p=e,B.forEach(i=>{const n=i.getAttribute("data-view-panel")===e;i.classList.toggle("hidden",!n),i.classList.toggle("block",n),n?i.setAttribute("data-view-active","true"):i.removeAttribute("data-view-active")}),A.forEach(i=>{const n=i.getAttribute("data-view-option")===e;i.setAttribute("aria-pressed",n?"true":"false"),i.classList.toggle("is-active",n)}),t&&w.set(v.view,e),l||y(),window.Player&&typeof window.Player.bind=="function"&&window.Player.bind()},s=a.querySelector("[data-filters-dialog]"),u=s?s.querySelector("[data-filters-panel]"):null,P=s?s.querySelector("[data-filters-scrim]"):null,f=a.querySelector("[data-filters-toggle]"),x=a.querySelector("[data-filters-close]"),W='a[href], button:not([disabled]), select:not([disabled]), textarea:not([disabled]), input:not([disabled]):not([type="hidden"]), [tabindex]:not([tabindex="-1"])';let b=null;const I=e=>{if(!u||e.key!=="Tab")return;const t=Array.from(u.querySelectorAll(W)).filter(g=>g.offsetParent!==null);if(!t.length)return;const l=t[0],i=t[t.length-1];e.shiftKey&&document.activeElement===l?(e.preventDefault(),i.focus()):!e.shiftKey&&document.activeElement===i&&(e.preventDefault(),l.focus())},h=e=>{!s||!u||(e?(b=document.activeElement&&typeof document.activeElement.focus=="function"?document.activeElement:null,s.classList.remove("hidden"),s.classList.remove("pointer-events-none"),L.classList.add("filters-open"),requestAnimationFrame(()=>{u.classList.remove("translate-x-full");const t=u.querySelector(W);t&&t.focus({preventScroll:!0})}),s.addEventListener("keydown",I),f&&f.setAttribute("aria-expanded","true")):(u.classList.add("translate-x-full"),s.classList.add("pointer-events-none"),L.classList.remove("filters-open"),s.removeEventListener("keydown",I),setTimeout(()=>{s.classList.add("hidden")},200),f&&f.setAttribute("aria-expanded","false"),b&&typeof b.focus=="function"&&b.focus({preventScroll:!0})))};if(f&&f.addEventListener("click",e=>{e.preventDefault(),h(!0)}),x&&x.addEventListener("click",e=>{e.preventDefault(),h(!1)}),P&&P.addEventListener("click",e=>{e.preventDefault(),h(!1)}),document.addEventListener("keydown",e=>{e.key==="Escape"&&s&&!s.classList.contains("hidden")&&h(!1)}),A.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),D(e.getAttribute("data-view-option"))})}),S.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const l=parseInt(e.getAttribute("data-preview-size-option")||"0",10);q(l)})}),r)q(c,{persist:!1,skipHistory:!0});else if(d){const e=()=>{const t=Math.max(window.innerWidth||0,document.documentElement.clientWidth||0);k(t)};e(),window.addEventListener("resize",e)}D(p,{persist:!1,skipHistory:!0}),y(),window.Player&&typeof window.Player.bind=="function"&&window.Player.bind(),window.addEventListener("theme:change",()=>{y()})});
